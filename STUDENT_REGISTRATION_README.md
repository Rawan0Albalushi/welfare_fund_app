# نظام تسجيل الطلاب - Student Registration System

## نظرة عامة

تم تطوير نظام تسجيل الطلاب لدعم صندوق رعاية الطلاب، حيث يمكن للطلاب التسجيل للحصول على الدعم المالي من خلال تطبيق Flutter مع واجهة مستخدم عربية حديثة.

## الميزات الرئيسية

### للطلاب
- ✅ تسجيل طلب جديد للحصول على الدعم المالي
- ✅ رفع المستندات المطلوبة (البطاقة الشخصية، كشف الدرجات، شهادة الدخل، إلخ)
- ✅ متابعة حالة الطلب
- ✅ عرض تفاصيل التسجيل
- ✅ تحديث المعلومات الشخصية

### للمديرين
- ✅ عرض قائمة جميع تسجيلات الطلاب
- ✅ البحث والتصفية حسب الحالة
- ✅ عرض تفاصيل كل تسجيل
- ✅ إدارة حالة الطلبات

## APIs المستخدمة

### 1. تسجيل طالب جديد
```
POST /api/v1/students/registration
```

**المعاملات المطلوبة:**
- `full_name` - الاسم الكامل
- `student_id` - رقم الطالب
- `phone` - رقم الهاتف
- `university` - الجامعة
- `college` - الكلية
- `major` - التخصص
- `academic_year` - السنة الدراسية
- `gpa` - المعدل التراكمي
- `gender` - الجنس
- `marital_status` - الحالة الاجتماعية
- `income_level` - مستوى الدخل
- `family_size` - حجم الأسرة

**المعاملات الاختيارية:**
- `email` - البريد الإلكتروني
- `address` - العنوان
- `emergency_contact` - جهة اتصال للطوارئ
- `emergency_phone` - هاتف الطوارئ
- `financial_need` - الاحتياج المالي
- `previous_support` - الدعم السابق
- `id_card_image` - صورة البطاقة الشخصية (ملف)

### 2. الحصول على جميع التسجيلات (للمدير)
```
GET /api/v1/students/registration
```

**معاملات الاستعلام:**
- `page` - رقم الصفحة
- `limit` - عدد العناصر في الصفحة
- `status` - حالة التسجيل (pending, approved, rejected, under_review)
- `search` - نص البحث

### 3. الحصول على تسجيل محدد
```
GET /api/v1/students/registration/{id}
```

### 4. رفع المستندات
```
POST /api/v1/students/registration/{id}/documents
```

**الملفات المدعومة:**
- `id_card_image` - صورة البطاقة الشخصية
- `transcript` - كشف الدرجات
- `income_certificate` - شهادة الدخل
- `family_card` - بطاقة العائلة
- `other_documents` - مستندات أخرى

## الملفات المطورة

### 1. النماذج (Models)
- `lib/models/student_registration.dart` - نموذج بيانات تسجيل الطالب

### 2. الخدمات (Services)
- `lib/services/student_registration_service.dart` - خدمة التعامل مع APIs

### 3. الشاشات (Screens)
- `lib/screens/student_registration_screen.dart` - شاشة تسجيل الطالب الجديد
- `lib/screens/student_registration_details_screen.dart` - شاشة تفاصيل التسجيل
- `lib/screens/upload_documents_screen.dart` - شاشة رفع المستندات
- `lib/screens/student_registrations_list_screen.dart` - شاشة قائمة التسجيلات (للمدير)

## كيفية الاستخدام

### تسجيل طالب جديد
1. انتقل إلى شاشة تسجيل الطالب
2. املأ جميع الحقول المطلوبة
3. اختر صورة البطاقة الشخصية (اختياري)
4. اضغط على "إرسال الطلب"
5. انتظر تأكيد الإرسال

### رفع المستندات
1. انتقل إلى تفاصيل التسجيل
2. اضغط على "رفع مستندات"
3. اختر المستندات المطلوبة
4. اضغط على "رفع المستندات"

### متابعة الطلب (للمدير)
1. انتقل إلى قائمة تسجيلات الطلاب
2. استخدم البحث والتصفية للعثور على الطلب المطلوب
3. اضغط على الطلب لعرض التفاصيل
4. يمكنك تغيير حالة الطلب من خلال API

## حالات التسجيل

- **قيد المراجعة (pending)** - الطلب جديد وتم استلامه
- **قيد الدراسة (under_review)** - الطلب قيد المراجعة من قبل اللجنة
- **مقبول (approved)** - تم قبول الطلب ومنح الدعم
- **مرفوض (rejected)** - تم رفض الطلب

## الأمان والخصوصية

- جميع الطلبات تتطلب مصادقة المستخدم
- يتم تشفير البيانات الحساسة
- يتم التحقق من صحة الملفات المرفوعة
- يتم تسجيل جميع العمليات للتدقيق

## المتطلبات التقنية

### Flutter Dependencies
```yaml
dependencies:
  dio: ^5.0.0
  image_picker: ^1.0.0
  flutter_secure_storage: ^8.0.0
  flutter_dotenv: ^5.0.0
```

### الأذونات المطلوبة (Android)
```xml
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET" />
```

### الأذونات المطلوبة (iOS)
```xml
<key>NSCameraUsageDescription</key>
<string>يحتاج التطبيق إلى الوصول للكاميرا لالتقاط صور المستندات</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>يحتاج التطبيق إلى الوصول للمعرض لاختيار صور المستندات</string>
```

## استكشاف الأخطاء

### مشاكل شائعة وحلولها

1. **خطأ في الاتصال بالخادم**
   - تأكد من صحة عنوان API
   - تحقق من اتصال الإنترنت
   - تأكد من صحة رمز المصادقة

2. **خطأ في رفع الملفات**
   - تأكد من أن الملف لا يتجاوز الحد الأقصى للحجم
   - تحقق من نوع الملف المدعوم
   - تأكد من وجود مساحة كافية على الجهاز

3. **خطأ في المصادقة**
   - تأكد من تسجيل الدخول
   - تحقق من صلاحية رمز المصادقة
   - أعد تسجيل الدخول إذا لزم الأمر

## التطوير المستقبلي

- [ ] إضافة إشعارات فورية لحالة الطلب
- [ ] دعم رفع ملفات PDF
- [ ] إضافة تقارير وإحصائيات
- [ ] دعم التوقيع الإلكتروني
- [ ] إضافة نظام المراجعة المتعدد المستويات
- [ ] دعم التطبيق على الويب

## الدعم والمساعدة

للمساعدة التقنية أو الإبلاغ عن مشاكل، يرجى التواصل مع فريق التطوير.

---

**تم التطوير بواسطة فريق صندوق رعاية الطلاب**  
**الإصدار:** 1.0.0  
**تاريخ آخر تحديث:** ديسمبر 2024
